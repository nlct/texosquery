% arara: xetex: {shell: on}

\input texosquery

%\texosquerydefpattern{\DTpattern}{\dtf{2}{d}/\dtf{2}{M}/\dtf{4}{y}\spc
%\dtf{2}{H}:\dtf{2}{m}:\dtf{2}{s} \dtf{2}{Z}}
%
%Pattern: {\tt \DTpattern}
%
%\TeXOSQueryDateTime{\datetimedata}
%
%\ifx\datetimedata\empty
% Query Failed!
%\else
% \expandafter\texosqueryfmtdatetime\expandafter\DTpattern\datetimedata
%\fi

\texosquerydefpattern{\numpattern}{\numfmt{\decfmt{\dgtnz \ngp \dgtnz \dgtnz \dgtnz \ngp \dgtnz \dgtnz \dgtnz
\ngp \dgtnz \dgtnz \dgt }{\dgtnz \dgtnz \dgtnz \dgtnz \dgtnz \dgtnz
\dgtnz \dgtnz \dgtnz \dgtnz }}}

\texosquerydefpattern{\sinumpattern}{\sinumfmt{\decfmt{\dgtnz \ngp \dgtnz \dgtnz \dgtnz \ngp \dgtnz \dgtnz \dgtnz
\ngp \dgtnz \dgtnz \dgt }{\dgtnz \dgtnz \dgtnz \dgtnz \dgtnz \dgtnz
\dgtnz \dgtnz \dgtnz \dgtnz }}{\msg\dgtnz \dgtnz \dgtnz \dgtnz \dgtnz \dgtnz
\dgtnz \dgtnz \dgt \dgt }}


\texosquerydefpattern{\intpattern}{\numfmt{\dgtnz \ngp \dgtnz \dgtnz \dgtnz
\ngp \dgtnz \dgtnz \dgtnz \ngp \dgtnz \dgtnz \dgt
}}

\texosquerydefpattern{\curpattern}{\numfmt{\pcur{\decfmt{\dgtnz \ngp \dgtnz \dgtnz \dgtnz \ngp \dgtnz \dgtnz
\dgtnz \ngp \dgtnz \dgtnz \dgt }{\dgt \dgt \dgtnz \dgtnz \dgtnz
\dgtnz \dgtnz \dgtnz \dgtnz \dgtnz }}{\msg}}}

\texosquerydefpattern{\pcpattern}{\numfmt{\spct{\dgtnz
\ngp \dgtnz \dgtnz \dgtnz \ngp \dgtnz \dgtnz \dgtnz \ngp \dgtnz \dgtnz \dgt
}{}}}

Numeric patterns.

\def\testpattern#1#2#3#4{%
  Testing {\tt #2.#3E#4}:
  \texosqueryfmtnumber{#1}{#2}{#3}{#4}
}

{\tt \numpattern}

\testpattern{\numpattern}{123}{4567}{2}

\testpattern{\numpattern}{-123}{4567}{0}

\testpattern{\numpattern}{-123}{4567}{-4}

\testpattern{\numpattern}{+1}{234567}{-3}

{\tt \sinumpattern}

\testpattern{\sinumpattern}{1}{234567}{-3}

\testpattern{\sinumpattern}{1}{234567}{4}

\testpattern{\sinumpattern}{-1}{234567}{2}

{\tt \intpattern}

\testpattern{\intpattern}{123}{4567}{2}

\testpattern{\intpattern}{-123}{4567}{0}

{\tt \curpattern}

\testpattern{\curpattern}{12345}{6}{0}

\testpattern{\curpattern}{12345678}{0}{0}

\testpattern{\curpattern}{-12345678}{0}{0}

{\tt \pcpattern}

\testpattern{\pcpattern}{-0}{56}{0}

\bye
